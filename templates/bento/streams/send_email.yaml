input:
  s2:
    basin: ${S2_BASIN}
    streams: outbox
    auth_token: "${S2_ACCESS_TOKEN}"
    cache: s2_outbox_cache

output:
  http_client:
    url: https://api.resend.com/emails
    verb: POST
    headers:
      Authorization: "Bearer ${RESEND_API_KEY}"
      Content-Type: "application/json"
    # The message from S2 is already a JSON object
    # Bento's http_client will use the root message as the request body
    # and serialize it as JSON when Content-Type is application/json
    retries: 3
    # If Resend fails, message stays in S2 (due to ack logic) or DLQ can be configured
